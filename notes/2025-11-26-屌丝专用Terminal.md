# 屌丝专用 Terminal !

最近刚重装系统，给从Ubuntu 20.04 换到了 Ubuntu 22.04

修饰了下系统，顺便把 Terminal 也调教了下

效果如下


<p align="center">
  <img src="../resource/figure/2025-11-26/Screenshot from 2025-11-26 16-03-28.png"
       alt="Terminal效果展示"
       height="500">
</p>
<p align="center"><em>图 1 Terminal效果展示</em></p>


**每条命令执行后，用 Emoji 告诉我它的状态，再顺手加上当前时间。**

---

## 实现方式很简单

核心就是给 `PROMPT_COMMAND` 挂一个钩子，检查上一条命令退出码 `$?`，然后根据返回值换成不同 Emoji。

```bash
# command custom —— 时间 + 状态 emoji

if [ -z "${ORIG_PS1_SAVED+x}" ]; then
  ORIG_PS1_SAVED="$PS1"
fi

prompt_status() {
  local last=$?   # 上一条命令的退出码
  case "$last" in
    0)   PS1_STATUS="😀" ;;          # 成功
    1)   PS1_STATUS="⚠️ " ;;         # 一般错误
    2)   PS1_STATUS="⛔" ;;          # 命令用法错误
    126) PS1_STATUS="🔐" ;;          # 权限不够
    127) PS1_STATUS="❓" ;;          # 命令不存在
    130) PS1_STATUS="⏹  " ;;         # Ctrl+C 中断
    137) PS1_STATUS="💀" ;;          # kill -9 / OOM
    139) PS1_STATUS="💥" ;;          # 段错误
    *)   PS1_STATUS="❌ ${last}" ;;  # 其他错误
  esac
}

case ";$PROMPT_COMMAND;" in
  *";prompt_status;"*)
    ;;
  *)
    if [ -n "$PROMPT_COMMAND" ]; then
      PROMPT_COMMAND="prompt_status; $PROMPT_COMMAND"
    else
      PROMPT_COMMAND="prompt_status"
    fi
    ;;
esac

PS1='\D{%H:%M} ${PS1_STATUS} '"$ORIG_PS1_SAVED"
```

  **把它丢进你的 `~/.bashrc` 或 `~/.zshrc`，重新打开终端即可生效。**

> [!TIP]
>**一定要放在 `~/.bashrc` 或 `~/.zshrc`最末尾才会生效！**



---

## 为什么要做这个？

没什么大道理，哪怕是一个屌丝用的 Terminal，也可以有点小情绪。

---

如果你也玩了什么有趣的终端魔改，欢迎一起交流 🤘
